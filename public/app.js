"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[260],{347:(e,t,a)=>{var r=a(538),i=a(19),s=a(669),n=a.n(s),o=a(381),l=a.n(o);const c=[{path:"/",redirect:"/receipts"},{path:"/receipts",name:"receipts",component:a(742).Z},{path:"/receipts/:id",name:"receipt",component:a(131).Z}];var m=a(345),p=(a(734),document.head.querySelector('meta[name="csrf-token"]'));n().defaults.headers.common["X-Requested-With"]="XMLHttpRequest",p&&(n().defaults.headers.common["X-CSRF-TOKEN"]=p.content),r.default.use(i.ZPm),r.default.use(m.Z),r.default.component("pagination",a(606)),r.default.prototype.$http=n().create(),r.default.prototype.$moment=l(),window.FiscalRegistrar.basePath="/"+window.FiscalRegistrar.path;var d=window.FiscalRegistrar.basePath+"/";""!==window.FiscalRegistrar.path&&"/"!==window.FiscalRegistrar.path||(d="/",window.FiscalRegistrar.basePath="");var b=new m.Z({routes:c,mode:"history",base:d});new r.default({el:"#fiscal-registrar",router:b,data:{message:"Welcome to Fiscal Registrar home page!"}})},853:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(645),i=a.n(r)()((function(e){return e[1]}));i.push([e.id,"fieldset[data-v-673aaf5c]{margin:0}",""]);const s=i},67:()=>{},131:(e,t,a)=>{a.d(t,{Z:()=>l});const r={data:function(){return{ready:!1,receipt:{},paymentMethods:[{value:"full_prepayment",text:"предоплата 100%"},{value:"prepayment",text:"предоплата"},{value:"advance",text:"аванс"},{value:"full_payment",text:"полный расчет"},{value:"partial_payment",text:"частичный расчет и кредит"},{value:"credit",text:"передача в кредит"},{value:"credit_payment",text:"оплата кредита"}],paymentObjects:[{value:"commodity",text:"товар"},{value:"excise",text:"подакцизный товар"},{value:"job",text:"работа"},{value:"service",text:"услуга"},{value:"gambling_bet",text:"ставка азартной игры"},{value:"gambling_prize",text:"выигрыш азартной игры"},{value:"lottery",text:"лотерейный билет"},{value:"lottery_prize",text:"выигрыш лотереи"},{value:"intellectual_activity",text:"предоставление результатов интеллектуальной деятельности"},{value:"payment",text:"платеж"},{value:"agent_commission",text:"агентское вознаграждение"},{value:"award",text:"взнос/штраф/вознаграждение/бонус"},{value:"composite",text:"составной предмет расчета"},{value:"another",text:"иной предмет расчета"},{value:"property_right",text:"имущественное право"},{value:"non-operating_gain",text:"внереализационный доход"},{value:"insurance_premium",text:"страховые взносы"},{value:"sales_tax",text:"торговый сбор"},{value:"resort_fee",text:"курортный сбор"},{value:"deposit",text:"залог"},{value:"expense",text:"расход"},{value:"pension_insurance_ip",text:"взносы на ОПС ИП"},{value:"pension_insurance",text:"взносы на ОПС"},{value:"medical_insurance_ip",text:"взносы на ОМС ИП"},{value:"medical_insurance",text:"взносы на ОМС"},{value:"social_insurance",text:"взносы на ОСС"},{value:"casino_payment",text:"платеж казино"}],agentTypes:[{value:null,text:"нет"},{value:"bank_paying_agent",text:"банковский платежный агент"},{value:"bank_paying_subagent",text:"банковский платежный субагент"},{value:"paying_agent",text:"платежный агент"},{value:"paying_subagent",text:"платежный субагент"},{value:"attorney",text:"поверенный"},{value:"commission_agent",text:"комиссионер"},{value:"another",text:"другой"}]}},mounted:function(){this.loadReceipt(this.$route.params.id),document.title="Fiscal Registrar - Receipt"},methods:{loadReceipt:function(e){var t=this;this.ready=!1,this.$http.get(FiscalRegistrar.basePath+"/api/v1/receipts/"+e).then((function(e){t.receipt=e.data,t.ready=!0}))},saveReceipt:function(){this.$http.put(FiscalRegistrar.basePath+"/api/v1/receipts/"+this.receipt.id,this.receipt)}}};var i=a(379),s=a.n(i),n=a(853),o={insert:"head",singleton:!1};s()(n.Z,o);n.Z.locals;const l=(0,a(900).Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accordion",attrs:{role:"tablist"}},[e.ready?a("b-form",{attrs:{validated:""},on:{submit:e.saveReceipt}},[a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],attrs:{block:"",variant:"info"}},[e._v("Данные клиента")])],1),e._v(" "),a("b-collapse",{attrs:{id:"accordion-1",visible:"",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("b-card-text",[e._v("\n                        В запросе обязательно должно быть заполнено хотя бы одно из полей: "),a("code",[e._v("email")]),e._v(" или "),a("code",[e._v("phone")]),e._v("."),a("br"),e._v("\n                        Если заполнены оба поля, ОФД отправит электронный чек только на email.\n                    ")]),e._v(" "),a("b-form-group",{attrs:{disabled:0!==e.receipt.state}},[a("b-container",{attrs:{fluid:""}},[a("b-form-row",{staticClass:"my-1"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-group",{attrs:{label:"Электронный адрес","label-for":"clientEmail"}},[a("b-form-input",{attrs:{id:"clientEmail",type:"email",size:"sm",placeholder:"user@domain.com"},model:{value:e.receipt.data.client.email,callback:function(t){e.$set(e.receipt.data.client,"email",t)},expression:"receipt.data.client.email"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"2"}},[a("b-form-group",{attrs:{label:"Телефон","label-for":"clientPhone"}},[a("b-form-input",{attrs:{id:"clientPhone",type:"tel",size:"sm",placeholder:"+79001234567"},model:{value:e.receipt.data.client.phone,callback:function(t){e.$set(e.receipt.data.client,"phone",t)},expression:"receipt.data.client.phone"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"2"}},[a("b-form-group",{attrs:{label:"Наименование","label-for":"clientName"}},[a("b-form-input",{attrs:{id:"clientName",type:"text",size:"sm",placeholder:"Иван Иванович Иванов"},model:{value:e.receipt.data.client.name,callback:function(t){e.$set(e.receipt.data.client,"name",t)},expression:"receipt.data.client.name"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"2"}},[a("b-form-group",{attrs:{label:"ИНН","label-for":"clientInn"}},[a("b-form-input",{attrs:{id:"clientInn",type:"text",size:"sm",placeholder:"1234567890",pattern:"\\d{10}|\\d{12}",maxlength:"12"},model:{value:e.receipt.data.client.inn,callback:function(t){e.$set(e.receipt.data.client,"inn",t)},expression:"receipt.data.client.inn"}})],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2",modifiers:{"accordion-2":!0}}],attrs:{block:"",variant:"info"}},[e._v("Данные организации")])],1),e._v(" "),a("b-collapse",{attrs:{id:"accordion-2",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("b-card-text",[e._v("\n                        Оставьте поля пустыми для автоматической подстановки параметров из конфигурации подключения при проводке чека.\n                    ")]),e._v(" "),a("b-form-group",{attrs:{disabled:0!==e.receipt.state}},[a("b-container",{attrs:{fluid:""}},[a("b-form-row",{staticClass:"my-1"},[a("b-col",{attrs:{sm:"2"}},[a("b-form-group",{attrs:{label:"Электронный адрес","label-for":"companyEmail"}},[a("b-form-input",{attrs:{id:"companyEmail",type:"email",size:"sm",placeholder:"user@domain.com"},model:{value:e.receipt.data.company.email,callback:function(t){e.$set(e.receipt.data.company,"email",t)},expression:"receipt.data.company.email"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"2"}},[a("b-form-group",{attrs:{label:"ИНН","label-for":"companyInn"}},[a("b-form-input",{attrs:{id:"companyInn",type:"text",size:"sm",placeholder:"1234567890",pattern:"\\d{10}|\\d{12}",maxlength:"12"},model:{value:e.receipt.data.company.inn,callback:function(t){e.$set(e.receipt.data.company,"inn",t)},expression:"receipt.data.company.inn"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"2"}},[a("b-form-group",{attrs:{label:"Место расчетов","label-for":"companyPaymentSite"}},[a("b-form-input",{attrs:{id:"companyPaymentSite",type:"text",size:"sm"},model:{value:e.receipt.data.company.payment_site,callback:function(t){e.$set(e.receipt.data.company,"payment_site",t)},expression:"receipt.data.company.payment_site"}})],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-3",modifiers:{"accordion-3":!0}}],attrs:{block:"",variant:"info"}},[e._v("Позиции документа")])],1),e._v(" "),a("b-collapse",{attrs:{id:"accordion-3",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("b-card-text",[e._v("\n                        TODO\n                    ")]),e._v(" "),a("b-form-group",{attrs:{disabled:0!==e.receipt.state}},[a("b-container",{attrs:{fluid:""}},e._l(e.receipt.data.items,(function(t,r){return a("b-form-row",{key:r,staticClass:"my-1"},[a("b-col",{attrs:{lg:"3",md:"2"}},[a("b-form-group",{attrs:{label:"Наименование","label-for":"item"+(r+1)+"Name"}},[a("b-form-input",{attrs:{id:"item"+(r+1)+"Name",type:"text",size:"sm",required:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1)],1),e._v(" "),a("b-col",{attrs:{lg:"1",md:"2"}},[a("b-form-group",{attrs:{label:"Цена","label-for":"item"+(r+1)+"Price"}},[a("b-form-input",{attrs:{id:"item"+(r+1)+"Price",type:"number",min:"0",max:"42949672.95",step:".01",size:"sm",placeholder:"0",required:""},model:{value:t.price,callback:function(a){e.$set(t,"price",a)},expression:"item.price"}})],1)],1),e._v(" "),a("b-col",{attrs:{lg:"1",md:"2"}},[a("b-form-group",{attrs:{label:"Кол-во","label-for":"item"+(r+1)+"Quantity"}},[a("b-form-input",{attrs:{id:"item"+(r+1)+"Quantity",type:"number",min:".001",max:"99999.999",step:"any",size:"sm",placeholder:"1",required:""},model:{value:t.quantity,callback:function(a){e.$set(t,"quantity",a)},expression:"item.quantity"}})],1)],1),e._v(" "),a("b-col",{attrs:{lg:"1",md:"2"}},[a("b-form-group",{attrs:{label:"Сумма","label-for":"item"+(r+1)+"Sum"}},[a("b-form-input",{attrs:{id:"item"+(r+1)+"Sum",type:"number",min:"0",max:"42949672.95",step:".01",size:"sm",placeholder:"0",required:""},model:{value:t.sum,callback:function(a){e.$set(t,"sum",a)},expression:"item.sum"}})],1)],1),e._v(" "),a("b-col",{attrs:{lg:"1",md:"2"}},[a("b-form-group",{attrs:{label:"Ед. изм.","label-for":"item"+(r+1)+"MeasurementUnit"}},[a("b-form-input",{attrs:{id:"item"+(r+1)+"MeasurementUnit",type:"text",size:"sm",placeholder:"шт.",maxlength:"16"},model:{value:t.measurement_unit,callback:function(a){e.$set(t,"measurement_unit",a)},expression:"item.measurement_unit"}})],1)],1),e._v(" "),a("b-col",{attrs:{lg:"2",md:"2"}},[a("b-form-group",{attrs:{label:"Способ расчета","label-for":"item"+(r+1)+"PaymentMethod"}},[a("b-form-select",{attrs:{id:"item"+(r+1)+"PaymentMethod",size:"sm",options:e.paymentMethods},model:{value:t.payment_method,callback:function(a){e.$set(t,"payment_method",a)},expression:"item.payment_method"}})],1)],1),e._v(" "),a("b-col",{attrs:{lg:"2",md:"2"}},[a("b-form-group",{attrs:{label:"Предмет расчета","label-for":"item"+(r+1)+"PaymentObject"}},[a("b-form-select",{attrs:{id:"item"+(r+1)+"PaymentObject",size:"sm",options:e.paymentObjects},model:{value:t.payment_object,callback:function(a){e.$set(t,"payment_object",a)},expression:"item.payment_object"}})],1)],1)],1)})),1)],1)],1)],1)],1),e._v(" "),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-4",modifiers:{"accordion-4":!0}}],attrs:{block:"",variant:"info"}},[e._v("Данные по оплате")])],1),e._v(" "),a("b-collapse",{attrs:{id:"accordion-4",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("b-card-text",[e._v("\n                        TODO\n                    ")]),e._v(" "),a("b-form-group",{attrs:{disabled:0!==e.receipt.state}},[a("b-container",{attrs:{fluid:""}},[a("b-form-row",{staticClass:"my-1"},[a("b-col",{attrs:{sm:"1"}},[a("b-form-group",{attrs:{label:"Наличными","label-for":"paymentCash"}},[a("b-form-input",{attrs:{id:"paymentCash",type:"number",min:"0",max:"42949672.95",step:".01",size:"sm",placeholder:"0"},model:{value:e.receipt.data.payments.cash,callback:function(t){e.$set(e.receipt.data.payments,"cash",t)},expression:"receipt.data.payments.cash"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"1"}},[a("b-form-group",{attrs:{label:"Безналичными","label-for":"paymentElectronic"}},[a("b-form-input",{attrs:{id:"paymentElectronic",type:"number",min:"0",max:"42949672.95",step:".01",size:"sm",placeholder:"0"},model:{value:e.receipt.data.payments.electronic,callback:function(t){e.$set(e.receipt.data.payments,"electronic",t)},expression:"receipt.data.payments.electronic"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"1"}},[a("b-form-group",{attrs:{label:"Предоплатой","label-for":"paymentPrepaid"}},[a("b-form-input",{attrs:{id:"paymentPrepaid",type:"number",min:"0",max:"42949672.95",step:".01",size:"sm",placeholder:"0"},model:{value:e.receipt.data.payments.prepaid,callback:function(t){e.$set(e.receipt.data.payments,"prepaid",t)},expression:"receipt.data.payments.prepaid"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"1"}},[a("b-form-group",{attrs:{label:"Постоплатой","label-for":"paymentPostpaid"}},[a("b-form-input",{attrs:{id:"paymentPostpaid",type:"number",min:"0",max:"42949672.95",step:".01",size:"sm",placeholder:"0"},model:{value:e.receipt.data.payments.postpaid,callback:function(t){e.$set(e.receipt.data.payments,"postpaid",t)},expression:"receipt.data.payments.postpaid"}})],1)],1),e._v(" "),a("b-col",{attrs:{sm:"1"}},[a("b-form-group",{attrs:{label:"Встр. предст.","label-for":"paymentOther"}},[a("b-form-input",{attrs:{id:"paymentOther",type:"number",min:"0",max:"42949672.95",step:".01",size:"sm",placeholder:"0"},model:{value:e.receipt.data.payments.other,callback:function(t){e.$set(e.receipt.data.payments,"other",t)},expression:"receipt.data.payments.other"}})],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-5",modifiers:{"accordion-5":!0}}],attrs:{block:"",variant:"info"}},[e._v("Данные агента")])],1),e._v(" "),a("b-collapse",{attrs:{id:"accordion-5",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("b-card-text",[e._v("\n                        TODO\n                    ")]),e._v(" "),a("b-form-group",{attrs:{disabled:0!==e.receipt.state}},[a("b-container",{attrs:{fluid:""}},[a("b-form-row",{staticClass:"my-1"},[a("b-col",{attrs:{sm:"2"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary",size:"sm",disabled:0!==e.receipt.state}},[e._v("Сохранить")])],1):e._e()],1)}),[],!1,null,"673aaf5c",null).exports},742:(e,t,a)=>{a.d(t,{Z:()=>i});const r={data:function(){return{fields:[{key:"id",label:"#"},{key:"created_at",label:"Время"},{key:"connection",label:"Соединение"},{key:"operation",label:"Тип"},{key:"data.total",label:"Сумма"},{key:"state",label:"Статус"}],receipts:{}}},mounted:function(){this.getReceipts()},methods:{getReceipts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get(FiscalRegistrar.basePath+"/api/v1/receipts/?page="+t).then((function(t){e.receipts=t.data}))}}};const i=(0,a(900).Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-table",{attrs:{small:"",striped:"",hover:"",items:e.receipts.data,fields:e.fields},scopedSlots:e._u([{key:"cell(id)",fn:function(t){return[a("a",{attrs:{href:"receipts/"+t.value}},[e._v(e._s(t.value))])]}},{key:"cell(created_at)",fn:function(t){return[e._v("\n            "+e._s(e.$moment(t.value).format("DD.MM.YYYY hh:mm:ss"))+"\n        ")]}}])}),e._v(" "),a("pagination",{attrs:{data:e.receipts,limit:2,"show-disabled":!0,align:"center"},on:{"pagination-change-page":e.getReceipts}})],1)}),[],!1,null,null,null).exports}},e=>{var t=t=>e(e.s=t);e.O(0,[143,660],(()=>(t(347),t(67))));e.O()}]);