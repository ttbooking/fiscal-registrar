{"version":3,"file":"receipt-CJ25qIhW.js","sources":["../../../resources/js/components/ReceiptItem.vue","../../../resources/js/screens/receipt.vue"],"sourcesContent":["<script>\nexport default {\n    props: [\"item\", \"disabled\"],\n\n    computed: {\n        id() {\n            return this.$vnode.key + 1;\n        },\n\n        model() {\n            return this.$deepModel(this.item);\n        },\n\n        vatSum() {\n            return String(this.extractVat(this.item.sum, this.item.vat.type));\n        },\n\n        agentType: {\n            get: function () {\n                return this.model[\"agent_info.type\"] ?? null;\n            },\n            set: function (val) {\n                this.model[\"agent_info.type\"] = val;\n            },\n        },\n\n        payingAgentPhones: {\n            get: function () {\n                return this.model[\"agent_info.paying_agent.phones\"]?.join(\"\\n\");\n            },\n            set: function (phones) {\n                phones = phones\n                    .split(\"\\n\")\n                    .map((phone) => phone.trim())\n                    .filter((phone) => phone != null && phone !== \"\");\n                this.model[\"agent_info.paying_agent.phones\"] = phones.length ? phones : null;\n            },\n        },\n\n        receivePaymentsOperatorPhones: {\n            get: function () {\n                return this.model[\"agent_info.receive_payments_operator.phones\"]?.join(\"\\n\");\n            },\n            set: function (phones) {\n                phones = phones\n                    .split(\"\\n\")\n                    .map((phone) => phone.trim())\n                    .filter((phone) => phone != null && phone !== \"\");\n                this.model[\"agent_info.receive_payments_operator.phones\"] = phones.length ? phones : null;\n            },\n        },\n\n        moneyTransferOperatorPhones: {\n            get: function () {\n                return this.model[\"agent_info.money_transfer_operator.phones\"]?.join(\"\\n\");\n            },\n            set: function (phones) {\n                phones = phones\n                    .split(\"\\n\")\n                    .map((phone) => phone.trim())\n                    .filter((phone) => phone != null && phone !== \"\");\n                this.model[\"agent_info.money_transfer_operator.phones\"] = phones.length ? phones : null;\n            },\n        },\n\n        supplierPhones: {\n            get: function () {\n                return this.model[\"supplier_info.phones\"]?.join(\"\\n\");\n            },\n            set: function (phones) {\n                phones = phones\n                    .split(\"\\n\")\n                    .map((phone) => phone.trim())\n                    .filter((phone) => phone != null && phone !== \"\");\n                this.model[\"supplier_info.phones\"] = phones.length ? phones : null;\n            },\n        },\n    },\n\n    watch: {\n        \"item.price\": function (price) {\n            this.item.sum = price * this.item.quantity;\n        },\n\n        \"item.quantity\": function (quantity) {\n            this.item.sum = this.item.price * quantity;\n        },\n\n        \"item.sum\": function (sum) {\n            this.item.vat.sum = this.extractVat(sum, this.item.vat.type);\n        },\n\n        \"item.vat.type\": function (vatType) {\n            this.item.vat.sum = this.extractVat(this.item.sum, vatType);\n        },\n\n        \"item.agent_info\": {\n            handler: function (agent_info) {\n                this.item.agent_info = agent_info?.type === null ? null : this.emptify(agent_info);\n            },\n            deep: true,\n        },\n\n        \"item.supplier_info\": {\n            handler: function (supplier_info) {\n                this.item.supplier_info = supplier_info?.type === null ? null : this.emptify(supplier_info);\n            },\n            deep: true,\n        },\n    },\n};\n</script>\n\n<template>\n    <b-container fluid>\n        <b-form-row class=\"my-1\">\n            <b-col align-self=\"end\" lg=\"4\" md=\"6\" sm=\"12\">\n                <b-form-group\n                    label=\"Наименование\"\n                    :label-for=\"'item' + id + 'Name'\"\n                    description=\"тег 1030\"\n                    class=\"required\"\n                >\n                    <b-form-input\n                        :id=\"'item' + id + 'Name'\"\n                        type=\"text\"\n                        size=\"sm\"\n                        required\n                        v-model=\"item.name\"\n                        :disabled=\"disabled\"\n                    ></b-form-input>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"1\" md=\"2\" sm=\"4\">\n                <b-form-group label=\"Цена\" :label-for=\"'item' + id + 'Price'\" description=\"тег 1079\" class=\"required\">\n                    <b-form-input\n                        :id=\"'item' + id + 'Price'\"\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"42949672.95\"\n                        step=\".01\"\n                        size=\"sm\"\n                        placeholder=\"0\"\n                        required\n                        v-model.number=\"item.price\"\n                        :disabled=\"disabled\"\n                    ></b-form-input>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"1\" md=\"2\" sm=\"4\">\n                <b-form-group\n                    label=\"Кол-во\"\n                    :label-for=\"'item' + id + 'Quantity'\"\n                    description=\"тег 1023\"\n                    class=\"required\"\n                >\n                    <b-form-input\n                        :id=\"'item' + id + 'Quantity'\"\n                        type=\"number\"\n                        min=\".001\"\n                        max=\"99999.999\"\n                        step=\"any\"\n                        size=\"sm\"\n                        placeholder=\"1\"\n                        required\n                        v-model.number=\"item.quantity\"\n                        :disabled=\"disabled\"\n                    ></b-form-input>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"1\" md=\"2\" sm=\"4\">\n                <b-form-group label=\"Сумма\" :label-for=\"'item' + id + 'Sum'\" description=\"тег 1043\" class=\"required\">\n                    <b-form-input\n                        :id=\"'item' + id + 'Sum'\"\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"42949672.95\"\n                        step=\".01\"\n                        size=\"sm\"\n                        placeholder=\"0\"\n                        required\n                        v-model.number=\"item.sum\"\n                        :disabled=\"disabled\"\n                    ></b-form-input>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"1\" md=\"2\" sm=\"4\">\n                <b-form-group label=\"Ед. изм.\" :label-for=\"'item' + id + 'MeasurementUnit'\" description=\"тег 1197\">\n                    <b-form-input\n                        :id=\"'item' + id + 'MeasurementUnit'\"\n                        type=\"text\"\n                        size=\"sm\"\n                        placeholder=\"шт.\"\n                        maxlength=\"16\"\n                        v-model=\"item.measurement_unit\"\n                        :disabled=\"disabled\"\n                    ></b-form-input>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"2\" md=\"2\" sm=\"4\">\n                <b-form-group\n                    label=\"Способ расчета\"\n                    :label-for=\"'item' + id + 'PaymentMethod'\"\n                    description=\"тег 1214\"\n                    class=\"required\"\n                >\n                    <b-form-select\n                        :id=\"'item' + id + 'PaymentMethod'\"\n                        size=\"sm\"\n                        v-model=\"item.payment_method\"\n                        :options=\"buildOptions(dictionary.paymentMethods)\"\n                        :disabled=\"disabled\"\n                    ></b-form-select>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"2\" md=\"2\" sm=\"4\">\n                <b-form-group\n                    label=\"Предмет расчета\"\n                    :label-for=\"'item' + id + 'PaymentObject'\"\n                    description=\"тег 1212\"\n                    class=\"required\"\n                >\n                    <b-form-select\n                        :id=\"'item' + id + 'PaymentObject'\"\n                        size=\"sm\"\n                        v-model=\"item.payment_object\"\n                        :options=\"buildOptions(dictionary.paymentObjects)\"\n                        :disabled=\"disabled\"\n                    ></b-form-select>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"1\" md=\"2\" sm=\"4\">\n                <b-form-group label=\"НДС\" :label-for=\"'item' + id + 'VatType'\" description=\"тег 1199\" class=\"required\">\n                    <b-form-select\n                        :id=\"'item' + id + 'VatType'\"\n                        size=\"sm\"\n                        v-model=\"item.vat.type\"\n                        :options=\"buildOptions(dictionary.vatTypes)\"\n                        :disabled=\"disabled\"\n                    ></b-form-select>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"1\" md=\"2\" sm=\"4\">\n                <b-form-group label=\"Сумма НДС\" :label-for=\"'item' + id + 'VatSum'\" description=\"тег 1200\">\n                    <b-form-input\n                        :id=\"'item' + id + 'VatSum'\"\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"42949672.95\"\n                        step=\".01\"\n                        size=\"sm\"\n                        :placeholder=\"vatSum\"\n                        v-model.number=\"item.vat.sum\"\n                        :disabled=\"disabled\"\n                    ></b-form-input>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                <b-form-group label=\"Признак агента\" :label-for=\"'item' + id + 'agentType'\" description=\"тег 1222\">\n                    <b-form-select\n                        :id=\"'item' + id + 'agentType'\"\n                        size=\"sm\"\n                        v-model=\"agentType\"\n                        :options=\"agentTypeOptions\"\n                        :disabled=\"disabled\"\n                    ></b-form-select>\n                </b-form-group>\n            </b-col>\n            <b-col align-self=\"end\" lg=\"1\" md=\"1\" sm=\"1\" class=\"ml-auto mr-0\">\n                <b-form-group class=\"text-right\">\n                    <b-button variant=\"danger\" size=\"sm\" title=\"Удалить\" @click=\"$emit('remove')\" :disabled=\"disabled\"\n                        ><b>&times;</b></b-button\n                    >\n                </b-form-group>\n            </b-col>\n        </b-form-row>\n        <div class=\"accordion\" role=\"tablist\" v-if=\"agentType !== null\">\n            <b-card no-body class=\"mb-1\">\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\n                    <b-button block v-b-toggle=\"'receipt-item-' + id + '-paying-agent'\"\n                        >Атрибуты платежного агента</b-button\n                    >\n                </b-card-header>\n                <b-collapse\n                    :id=\"'receipt-item-' + id + '-paying-agent'\"\n                    :accordion=\"'receipt-item-' + id + '-agent-supplier-accordion'\"\n                    role=\"tabpanel\"\n                >\n                    <b-card-body>\n                        <b-container fluid>\n                            <b-form-row class=\"my-1\">\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Наименование операции\"\n                                        :label-for=\"'item' + id + 'payingAgentOperation'\"\n                                        description=\"тег 1044\"\n                                    >\n                                        <b-form-input\n                                            :id=\"'item' + id + 'payingAgentOperation'\"\n                                            type=\"text\"\n                                            size=\"sm\"\n                                            v-model=\"model['agent_info.paying_agent.operation']\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-input>\n                                    </b-form-group>\n                                </b-col>\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Телефон(ы)\"\n                                        :label-for=\"'item' + id + 'payingAgentPhones'\"\n                                        description=\"тег 1073\"\n                                    >\n                                        <b-form-textarea\n                                            :id=\"'item' + id + 'payingAgentPhones'\"\n                                            size=\"sm\"\n                                            max-rows=\"4\"\n                                            v-model=\"payingAgentPhones\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-textarea>\n                                    </b-form-group>\n                                </b-col>\n                            </b-form-row>\n                        </b-container>\n                    </b-card-body>\n                </b-collapse>\n            </b-card>\n\n            <b-card no-body class=\"mb-1\">\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\n                    <b-button block v-b-toggle=\"'receipt-item-' + id + '-receive-payments-operator'\"\n                        >Атрибуты оператора по приему платежей</b-button\n                    >\n                </b-card-header>\n                <b-collapse\n                    :id=\"'receipt-item-' + id + '-receive-payments-operator'\"\n                    :accordion=\"'receipt-item-' + id + '-agent-supplier-accordion'\"\n                    role=\"tabpanel\"\n                >\n                    <b-card-body>\n                        <b-container fluid>\n                            <b-form-row class=\"my-1\">\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Телефон(ы)\"\n                                        :label-for=\"'item' + id + 'receivePaymentsOperatorPhones'\"\n                                        description=\"тег 1074\"\n                                    >\n                                        <b-form-textarea\n                                            :id=\"'item' + id + 'receivePaymentsOperatorPhones'\"\n                                            size=\"sm\"\n                                            max-rows=\"4\"\n                                            v-model=\"receivePaymentsOperatorPhones\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-textarea>\n                                    </b-form-group>\n                                </b-col>\n                            </b-form-row>\n                        </b-container>\n                    </b-card-body>\n                </b-collapse>\n            </b-card>\n\n            <b-card no-body class=\"mb-1\">\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\n                    <b-button block v-b-toggle=\"'receipt-item-' + id + '-money-transfer-operator'\"\n                        >Атрибуты оператора перевода</b-button\n                    >\n                </b-card-header>\n                <b-collapse\n                    :id=\"'receipt-item-' + id + '-money-transfer-operator'\"\n                    :accordion=\"'receipt-item-' + id + '-agent-supplier-accordion'\"\n                    role=\"tabpanel\"\n                >\n                    <b-card-body>\n                        <b-container fluid>\n                            <b-form-row class=\"my-1\">\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Телефон(ы)\"\n                                        :label-for=\"'item' + id + 'moneyTransferOperatorPhones'\"\n                                        description=\"тег 1075\"\n                                    >\n                                        <b-form-textarea\n                                            :id=\"'item' + id + 'moneyTransferOperatorPhones'\"\n                                            size=\"sm\"\n                                            max-rows=\"4\"\n                                            v-model=\"moneyTransferOperatorPhones\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-textarea>\n                                    </b-form-group>\n                                </b-col>\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Наименование\"\n                                        :label-for=\"'item' + id + 'moneyTransferOperatorName'\"\n                                        description=\"тег 1026\"\n                                    >\n                                        <b-form-input\n                                            :id=\"'item' + id + 'moneyTransferOperatorName'\"\n                                            type=\"text\"\n                                            size=\"sm\"\n                                            v-model=\"model['agent_info.money_transfer_operator.name']\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-input>\n                                    </b-form-group>\n                                </b-col>\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Адрес\"\n                                        :label-for=\"'item' + id + 'moneyTransferOperatorAddress'\"\n                                        description=\"тег 1005\"\n                                    >\n                                        <b-form-input\n                                            :id=\"'item' + id + 'moneyTransferOperatorAddress'\"\n                                            type=\"text\"\n                                            size=\"sm\"\n                                            v-model=\"model['agent_info.money_transfer_operator.address']\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-input>\n                                    </b-form-group>\n                                </b-col>\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"ИНН\"\n                                        :label-for=\"'item' + id + 'moneyTransferOperatorInn'\"\n                                        description=\"тег 1016\"\n                                    >\n                                        <b-form-input\n                                            :id=\"'item' + id + 'moneyTransferOperatorInn'\"\n                                            type=\"text\"\n                                            size=\"sm\"\n                                            pattern=\"\\d{10}|\\d{12}\"\n                                            maxlength=\"12\"\n                                            v-model=\"model['agent_info.money_transfer_operator.inn']\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-input>\n                                    </b-form-group>\n                                </b-col>\n                            </b-form-row>\n                        </b-container>\n                    </b-card-body>\n                </b-collapse>\n            </b-card>\n\n            <b-card no-body class=\"mb-1\">\n                <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\n                    <b-button block v-b-toggle=\"'receipt-item-' + id + '-supplier'\">Атрибуты поставщика</b-button>\n                </b-card-header>\n                <b-collapse\n                    :id=\"'receipt-item-' + id + '-supplier'\"\n                    :accordion=\"'receipt-item-' + id + '-agent-supplier-accordion'\"\n                    role=\"tabpanel\"\n                >\n                    <b-card-body>\n                        <b-container fluid>\n                            <b-form-row class=\"my-1\">\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Телефон(ы)\"\n                                        :label-for=\"'item' + id + 'supplierPhones'\"\n                                        description=\"тег 1171\"\n                                        class=\"required\"\n                                    >\n                                        <b-form-textarea\n                                            :id=\"'item' + id + 'supplierPhones'\"\n                                            size=\"sm\"\n                                            max-rows=\"4\"\n                                            required\n                                            v-model=\"supplierPhones\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-textarea>\n                                    </b-form-group>\n                                </b-col>\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"Наименование\"\n                                        :label-for=\"'item' + id + 'supplierName'\"\n                                        description=\"тег 1225\"\n                                    >\n                                        <b-form-input\n                                            :id=\"'item' + id + 'supplierName'\"\n                                            type=\"text\"\n                                            size=\"sm\"\n                                            v-model=\"model['supplier_info.name']\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-input>\n                                    </b-form-group>\n                                </b-col>\n                                <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\n                                    <b-form-group\n                                        label=\"ИНН\"\n                                        :label-for=\"'item' + id + 'supplierInn'\"\n                                        description=\"тег 1226\"\n                                    >\n                                        <b-form-input\n                                            :id=\"'item' + id + 'supplierInn'\"\n                                            type=\"text\"\n                                            size=\"sm\"\n                                            pattern=\"\\d{10}|\\d{12}\"\n                                            maxlength=\"12\"\n                                            v-model=\"model['supplier_info.inn']\"\n                                            :disabled=\"disabled\"\n                                        ></b-form-input>\n                                    </b-form-group>\n                                </b-col>\n                            </b-form-row>\n                        </b-container>\n                    </b-card-body>\n                </b-collapse>\n            </b-card>\n        </div>\n    </b-container>\n</template>\n","<script>\r\nimport Receipt from \"../models/Receipt\";\r\nimport ReceiptItem from \"../components/ReceiptItem.vue\";\r\n\r\nexport default {\r\n    components: {\r\n        ReceiptItem,\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            ready: false,\r\n            showPreview: false,\r\n            receipt: new Receipt(),\r\n            vats: {\r\n                without_vat: null,\r\n                with_vat0: null,\r\n                vat5: null,\r\n                vat7: null,\r\n                vat10: null,\r\n                vat22: null,\r\n                vat105: null,\r\n                vat107: null,\r\n                vat110: null,\r\n                vat122: null,\r\n            },\r\n            agentInfo: {\r\n                type: null,\r\n                paying_agent: {\r\n                    operation: null,\r\n                    phones: null,\r\n                },\r\n                receive_payments_operator: {\r\n                    phones: null,\r\n                },\r\n                money_transfer_operator: {\r\n                    phones: null,\r\n                    name: null,\r\n                    address: null,\r\n                    inn: null,\r\n                },\r\n            },\r\n        };\r\n    },\r\n\r\n    mounted() {\r\n        this.handleRoute(this.$route);\r\n        this.enumConnections();\r\n        this.listenEvents();\r\n    },\r\n\r\n    methods: {\r\n        async handleRoute(to, from = null) {\r\n            switch (to.name) {\r\n                case \"receipt\":\r\n                    await this.loadReceipt(to.params.id);\r\n                    break;\r\n                case \"new-receipt\":\r\n                    this.resetReceipt();\r\n                    break;\r\n                case \"new-receipt-from-existing\":\r\n                    from !== null && from.name === \"receipt\" && +to.params.id === +from.params.id\r\n                        ? this.shrinkReceipt()\r\n                        : await this.loadReceipt(to.params.id, true);\r\n            }\r\n        },\r\n\r\n        listenEvents() {\r\n            this.$echo.listen(\".receipt.processed\", (receipt) => {\r\n                if (receipt.id === this.receipt.id) {\r\n                    this.receipt = receipt;\r\n                }\r\n            });\r\n        },\r\n\r\n        resetReceipt() {\r\n            this.receipt = new Receipt({\r\n                id: null,\r\n                state: 0,\r\n                connection: null,\r\n                operation: null,\r\n                external_id: null,\r\n                internal_id: null,\r\n                payload: {\r\n                    client: {\r\n                        email: null,\r\n                        phone: null,\r\n                        name: null,\r\n                        inn: null,\r\n                    },\r\n                    company: {\r\n                        name: null,\r\n                        email: null,\r\n                        inn: null,\r\n                        payment_address: null,\r\n                        payment_site: null,\r\n                        tax_system: null,\r\n                    },\r\n                    agent_info: null,\r\n                    supplier_info: null,\r\n                    items: [],\r\n                    payments: {\r\n                        cash: 0,\r\n                        electronic: 0,\r\n                        prepaid: 0,\r\n                        postpaid: 0,\r\n                        other: 0,\r\n                    },\r\n                    vats: null,\r\n                    total: 0,\r\n                    additional_check_props: null,\r\n                    cashier: null,\r\n                    additional_user_props: null,\r\n                },\r\n                result: null,\r\n            });\r\n            this.ready = true;\r\n        },\r\n\r\n        shrinkReceipt() {\r\n            this.receipt.id = null;\r\n            this.receipt.state = 0;\r\n            this.receipt.external_id = null;\r\n            this.receipt.internal_id = null;\r\n            this.receipt.result = null;\r\n        },\r\n\r\n        async loadReceipt(id, asTemplate = false) {\r\n            this.ready = false;\r\n            this.receipt = await Receipt.find(id);\r\n            asTemplate && this.shrinkReceipt();\r\n            this.ready = true;\r\n        },\r\n\r\n        async saveReceipt() {\r\n            try {\r\n                const isNew = !this.receipt.id;\r\n                this.receipt = await this.receipt.save();\r\n                isNew && this.$router.replace({ name: \"receipt\", params: { id: this.receipt.id } });\r\n            } catch (error) {\r\n                Object.values(error.response.data.errors).forEach((msgBag) =>\r\n                    this.$bvToast.toast(\r\n                        msgBag.map((msg) => this.$createElement(\"div\", msg)),\r\n                        {\r\n                            toaster: \"b-toaster-bottom-right\",\r\n                            variant: \"danger\",\r\n                            solid: true,\r\n                            noCloseButton: true,\r\n                        },\r\n                    ),\r\n                );\r\n            }\r\n        },\r\n\r\n        async registerReceipt() {\r\n            await this.saveReceipt();\r\n            this.receipt = await this.receipt.register();\r\n        },\r\n\r\n        async syncReceipt() {\r\n            await this.receipt.sync();\r\n        },\r\n\r\n        async deleteReceipt() {\r\n            if (confirm(\"Удалить чек?\")) {\r\n                await this.receipt.delete();\r\n                this.$router.replace({ name: \"receipts\" });\r\n            }\r\n        },\r\n\r\n        addItem() {\r\n            this.receipt.payload.items.push({\r\n                agent_info: null,\r\n                country_code: null,\r\n                declaration_number: null,\r\n                excise: null,\r\n                measurement_unit: null,\r\n                name: \"\",\r\n                nomenclature_code: null,\r\n                payment_method: \"full_prepayment\",\r\n                payment_object: \"commodity\",\r\n                price: null,\r\n                quantity: 1,\r\n                sum: null,\r\n                supplier_info: null,\r\n                user_data: null,\r\n                vat: {\r\n                    sum: null,\r\n                    type: \"vat22\",\r\n                },\r\n            });\r\n        },\r\n\r\n        removeItem(id) {\r\n            this.receipt.payload.items.splice(id, 1);\r\n        },\r\n\r\n        getVats(calc = false) {\r\n            const vats = {\r\n                without_vat: 0,\r\n                with_vat0: 0,\r\n                vat5: 0,\r\n                vat7: 0,\r\n                vat10: 0,\r\n                vat22: 0,\r\n                vat105: 0,\r\n                vat107: 0,\r\n                vat110: 0,\r\n                vat122: 0,\r\n            };\r\n\r\n            if (calc) {\r\n                for (const item of this.receipt.payload.items) {\r\n                    switch (item?.vat.type ?? \"none\") {\r\n                        case \"vat22\":\r\n                        case \"vat20\":\r\n                        case \"vat18\":\r\n                            vats.vat22 += this.extractVat(item.sum, item.vat.type);\r\n                            break;\r\n                        case \"vat10\":\r\n                            vats.vat10 += this.extractVat(item.sum, item.vat.type);\r\n                            break;\r\n                        case \"vat0\":\r\n                            vats.with_vat0 += item.sum;\r\n                            break;\r\n                        case \"none\":\r\n                            vats.without_vat += item.sum;\r\n                            break;\r\n                        case \"vat122\":\r\n                        case \"vat120\":\r\n                        case \"vat118\":\r\n                            vats.vat122 += this.extractVat(item.sum, item.vat.type);\r\n                            break;\r\n                        case \"vat110\":\r\n                            vats.vat110 += this.extractVat(item.sum, item.vat.type);\r\n                            break;\r\n                        case \"vat5\":\r\n                            vats.vat5 += this.extractVat(item.sum, item.vat.type);\r\n                            break;\r\n                        case \"vat7\":\r\n                            vats.vat7 += this.extractVat(item.sum, item.vat.type);\r\n                            break;\r\n                        case \"vat105\":\r\n                            vats.vat105 += this.extractVat(item.sum, item.vat.type);\r\n                            break;\r\n                        case \"vat107\":\r\n                            vats.vat107 += this.extractVat(item.sum, item.vat.type);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return vats;\r\n        },\r\n\r\n        fitContent(event) {\r\n            event.target.style.height = event.target.contentDocument.body.scrollHeight + 20 + \"px\";\r\n        },\r\n\r\n        printReceipt() {\r\n            let printWindow = window.open(\r\n                window.FiscalRegistrar.basePath + \"/api/v1/receipts/\" + this.receipt.id + \"/preview\",\r\n                \"ReceiptPreview\",\r\n                \"popup,width=500,height=1000\",\r\n            );\r\n            printWindow.onafterprint = printWindow.close;\r\n            printWindow.onload = function () {\r\n                printWindow.setTimeout(printWindow.print);\r\n            };\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        title() {\r\n            const action = !this.receipt.id ? \"Создание\" : this.receipt.state === 0 ? \"Редактирование\" : \"Просмотр\";\r\n            return action + \" кассового чека\";\r\n        },\r\n\r\n        model() {\r\n            return this.$deepModel(this.receipt.payload);\r\n        },\r\n\r\n        selectConnections() {\r\n            return [\r\n                { value: null, text: \"автоопределение\" },\r\n                ...this.buildOptions(this.connections, ([name, data]) => ({ value: name, text: data.display_name })),\r\n            ];\r\n        },\r\n\r\n        isClientEmailRequired() {\r\n            return !this.receipt.payload.client.phone;\r\n        },\r\n\r\n        isClientPhoneRequired() {\r\n            return !this.receipt.payload.client.email;\r\n        },\r\n\r\n        companyEmailPlaceholder() {\r\n            return this.connections[this.receipt.connection]?.company?.email ?? \"contact@myshop.com\";\r\n        },\r\n\r\n        companyNamePlaceholder() {\r\n            return this.connections[this.receipt.connection]?.company?.name ?? 'ООО \"Рога и Копыта\"';\r\n        },\r\n\r\n        companyInnPlaceholder() {\r\n            return this.connections[this.receipt.connection]?.company?.inn ?? \"1234567890\";\r\n        },\r\n\r\n        companyPaymentSitePlaceholder() {\r\n            return this.connections[this.receipt.connection]?.company?.payment_site ?? \"https://www.myshop.com\";\r\n        },\r\n\r\n        companyPaymentAddressPlaceholder() {\r\n            return this.connections[this.receipt.connection]?.company?.payment_address ?? \"\";\r\n        },\r\n\r\n        vatsPlaceholder() {\r\n            return Object.fromEntries(\r\n                Object.entries(this.getVats(!this.receipt.payload.vats)).map(([key, val]) => [key, String(val)]),\r\n            );\r\n        },\r\n\r\n        vatsWithoutVat: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.without_vat ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.without_vat = val || null;\r\n            },\r\n        },\r\n\r\n        vatsWithVat0: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.with_vat0 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.with_vat0 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat5: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat5 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat5 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat7: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat7 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat7 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat10: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat10 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat10 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat22: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat22 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat22 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat105: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat105 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat105 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat107: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat107 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat107 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat110: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat110 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat110 = val || null;\r\n            },\r\n        },\r\n\r\n        vatsVat122: {\r\n            get: function () {\r\n                return this.receipt.payload.vats?.vat122 ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.vats ??= this.vats;\r\n                this.receipt.payload.vats.vat122 = val || null;\r\n            },\r\n        },\r\n\r\n        agentType: {\r\n            get: function () {\r\n                return this.receipt.payload.agent_info?.type ?? null;\r\n            },\r\n            set: function (val) {\r\n                this.receipt.payload.agent_info ??= this.agentInfo;\r\n                this.receipt.payload.agent_info.type = val || null;\r\n            },\r\n        },\r\n\r\n        payingAgentPhones: {\r\n            get: function () {\r\n                return this.model[\"agent_info.paying_agent.phones\"]?.join(\"\\n\");\r\n            },\r\n            set: function (phones) {\r\n                phones = phones\r\n                    .split(\"\\n\")\r\n                    .map((phone) => phone.trim())\r\n                    .filter((phone) => phone != null && phone !== \"\");\r\n                this.model[\"agent_info.paying_agent.phones\"] = phones.length ? phones : null;\r\n            },\r\n        },\r\n\r\n        receivePaymentsOperatorPhones: {\r\n            get: function () {\r\n                return this.model[\"agent_info.receive_payments_operator.phones\"]?.join(\"\\n\");\r\n            },\r\n            set: function (phones) {\r\n                phones = phones\r\n                    .split(\"\\n\")\r\n                    .map((phone) => phone.trim())\r\n                    .filter((phone) => phone != null && phone !== \"\");\r\n                this.model[\"agent_info.receive_payments_operator.phones\"] = phones.length ? phones : null;\r\n            },\r\n        },\r\n\r\n        moneyTransferOperatorPhones: {\r\n            get: function () {\r\n                return this.model[\"agent_info.money_transfer_operator.phones\"]?.join(\"\\n\");\r\n            },\r\n            set: function (phones) {\r\n                phones = phones\r\n                    .split(\"\\n\")\r\n                    .map((phone) => phone.trim())\r\n                    .filter((phone) => phone != null && phone !== \"\");\r\n                this.model[\"agent_info.money_transfer_operator.phones\"] = phones.length ? phones : null;\r\n            },\r\n        },\r\n\r\n        supplierPhones: {\r\n            get: function () {\r\n                return this.model[\"supplier_info.phones\"]?.join(\"\\n\");\r\n            },\r\n            set: function (phones) {\r\n                phones = phones\r\n                    .split(\"\\n\")\r\n                    .map((phone) => phone.trim())\r\n                    .filter((phone) => phone != null && phone !== \"\");\r\n                this.model[\"supplier_info.phones\"] = phones.length ? phones : null;\r\n            },\r\n        },\r\n\r\n        resultPayloadFnsSite() {\r\n            return /^https?:\\/\\//i.test(this.receipt.result.payload.fns_site)\r\n                ? this.receipt.result.payload.fns_site\r\n                : \"https://\" + this.receipt.result.payload.fns_site;\r\n        },\r\n    },\r\n\r\n    watch: {\r\n        $route(to, from) {\r\n            this.handleRoute(to, from);\r\n        },\r\n\r\n        \"receipt.payload.items\": {\r\n            handler: function (items) {\r\n                this.receipt.payload.total = items.reduce((total, item) => total + item.sum, 0);\r\n            },\r\n            deep: true,\r\n        },\r\n\r\n        \"receipt.payload.vats\": {\r\n            handler: function (vats) {\r\n                if (vats === null) return;\r\n                Object.values(vats).every((vat) => vat === null) && (this.receipt.payload.vats = null);\r\n            },\r\n            deep: true,\r\n        },\r\n\r\n        \"receipt.payload.agent_info\": {\r\n            handler: function (agent_info) {\r\n                this.receipt.payload.agent_info = agent_info?.type === null ? null : this.emptify(agent_info);\r\n            },\r\n            deep: true,\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nfieldset {\r\n    margin: 0;\r\n}\r\n</style>\r\n\r\n<template>\r\n    <div>\r\n        <h2 class=\"text-center\" v-if=\"ready\">{{ title }}</h2>\r\n        <b-form validated v-if=\"ready\" @submit.prevent=\"saveReceipt\">\r\n            <div class=\"accordion\" role=\"tablist\">\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-attributes variant=\"info\">Атрибуты документа</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-attributes\" visible accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-text> TODO </b-card-text>\r\n                            <b-form-group :disabled=\"receipt.state !== 0\">\r\n                                <b-container fluid>\r\n                                    <b-form-row class=\"my-1\">\r\n                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                            <b-form-group\r\n                                                label=\"Подключение\"\r\n                                                label-for=\"receiptConnection\"\r\n                                                class=\"required\"\r\n                                            >\r\n                                                <b-form-select\r\n                                                    id=\"receiptConnection\"\r\n                                                    size=\"sm\"\r\n                                                    v-model=\"receipt.connection\"\r\n                                                    :options=\"selectConnections\"\r\n                                                ></b-form-select>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                            <b-form-group\r\n                                                label=\"Операция\"\r\n                                                label-for=\"receiptOperation\"\r\n                                                class=\"required\"\r\n                                            >\r\n                                                <b-form-select\r\n                                                    id=\"receiptOperation\"\r\n                                                    size=\"sm\"\r\n                                                    required\r\n                                                    v-model=\"receipt.operation\"\r\n                                                    :options=\"buildOptions(dictionary.operations)\"\r\n                                                ></b-form-select>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                            <b-form-group\r\n                                                label=\"Уникальный идентификатор\"\r\n                                                label-for=\"receiptExternalId\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"receiptExternalId\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    v-model=\"receipt.external_id\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                    </b-form-row>\r\n                                </b-container>\r\n                            </b-form-group>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-client variant=\"info\">Данные клиента</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-client\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-text>\r\n                                В запросе обязательно должно быть заполнено хотя бы одно из полей:\r\n                                <code>email</code> или <code>phone</code>.<br />\r\n                                Если заполнены оба поля, ОФД отправит электронный чек только на email.\r\n                            </b-card-text>\r\n                            <b-form-group :disabled=\"receipt.state !== 0\">\r\n                                <b-container fluid>\r\n                                    <b-form-row class=\"my-1\">\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Электронный адрес\"\r\n                                                label-for=\"clientEmail\"\r\n                                                description=\"тег 1008\"\r\n                                                :class=\"isClientEmailRequired && 'required'\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"clientEmail\"\r\n                                                    type=\"email\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"user@domain.com\"\r\n                                                    :required=\"isClientEmailRequired\"\r\n                                                    v-model=\"receipt.payload.client.email\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Телефон\"\r\n                                                label-for=\"clientPhone\"\r\n                                                description=\"тег 1008\"\r\n                                                :class=\"isClientPhoneRequired && 'required'\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"clientPhone\"\r\n                                                    type=\"tel\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"+79001234567\"\r\n                                                    :required=\"isClientPhoneRequired\"\r\n                                                    v-model=\"receipt.payload.client.phone\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Наименование\"\r\n                                                label-for=\"clientName\"\r\n                                                description=\"тег 1227\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"clientName\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"Иван Иванович Иванов\"\r\n                                                    v-model=\"receipt.payload.client.name\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group label=\"ИНН\" label-for=\"clientInn\" description=\"тег 1228\">\r\n                                                <b-form-input\r\n                                                    id=\"clientInn\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"1234567890\"\r\n                                                    pattern=\"\\d{10}|\\d{12}\"\r\n                                                    maxlength=\"12\"\r\n                                                    v-model=\"receipt.payload.client.inn\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                    </b-form-row>\r\n                                </b-container>\r\n                            </b-form-group>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-company variant=\"info\">Данные организации</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-company\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-text>\r\n                                Оставьте поля пустыми для автоматической подстановки параметров из конфигурации\r\n                                подключения при проводке чека.\r\n                            </b-card-text>\r\n                            <b-form-group :disabled=\"receipt.state !== 0\">\r\n                                <b-container fluid>\r\n                                    <b-form-row class=\"my-1\">\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Электронный адрес\"\r\n                                                label-for=\"companyEmail\"\r\n                                                description=\"тег 1117\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"companyEmail\"\r\n                                                    type=\"email\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"companyEmailPlaceholder\"\r\n                                                    v-model=\"receipt.payload.company.email\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Наименование\"\r\n                                                label-for=\"companyName\"\r\n                                                description=\"тег 1048\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"companyName\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"companyNamePlaceholder\"\r\n                                                    v-model=\"receipt.payload.company.name\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group label=\"ИНН\" label-for=\"companyInn\" description=\"тег 1018\">\r\n                                                <b-form-input\r\n                                                    id=\"companyInn\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"companyInnPlaceholder\"\r\n                                                    pattern=\"\\d{10}|\\d{12}\"\r\n                                                    maxlength=\"12\"\r\n                                                    v-model=\"receipt.payload.company.inn\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Система налогообложения\"\r\n                                                label-for=\"taxSystem\"\r\n                                                description=\"тег 1055\"\r\n                                            >\r\n                                                <b-form-select\r\n                                                    id=\"taxSystem\"\r\n                                                    size=\"sm\"\r\n                                                    v-model=\"receipt.payload.company.tax_system\"\r\n                                                    :options=\"taxSystemOptions\"\r\n                                                ></b-form-select>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Место расчетов\"\r\n                                                label-for=\"companyPaymentSite\"\r\n                                                description=\"тег 1187\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"companyPaymentSite\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"companyPaymentSitePlaceholder\"\r\n                                                    v-model=\"receipt.payload.company.payment_site\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Адрес расчетов\"\r\n                                                label-for=\"companyPaymentAddress\"\r\n                                                description=\"тег 1009\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"companyPaymentAddress\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"companyPaymentAddressPlaceholder\"\r\n                                                    v-model=\"receipt.payload.company.payment_address\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                    </b-form-row>\r\n                                </b-container>\r\n                            </b-form-group>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-agent-supplier variant=\"info\"\r\n                            >Данные агента и поставщика</b-button\r\n                        >\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-agent-supplier\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-text> TODO </b-card-text>\r\n                            <b-form-group :disabled=\"receipt.state !== 0\">\r\n                                <b-container fluid>\r\n                                    <b-form-row class=\"my-1\">\r\n                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                            <b-form-group\r\n                                                label=\"Признак агента\"\r\n                                                label-for=\"agentType\"\r\n                                                description=\"тег 1057\"\r\n                                            >\r\n                                                <b-form-select\r\n                                                    id=\"agentType\"\r\n                                                    size=\"sm\"\r\n                                                    v-model=\"agentType\"\r\n                                                    :options=\"agentTypeOptions\"\r\n                                                ></b-form-select>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                    </b-form-row>\r\n                                </b-container>\r\n\r\n                                <div class=\"accordion\" role=\"tablist\" v-if=\"agentType !== null\">\r\n                                    <b-card no-body class=\"mb-1\">\r\n                                        <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                                            <b-button block v-b-toggle.receipt-paying-agent\r\n                                                >Атрибуты платежного агента</b-button\r\n                                            >\r\n                                        </b-card-header>\r\n                                        <b-collapse\r\n                                            id=\"receipt-paying-agent\"\r\n                                            accordion=\"receipt-agent-supplier-accordion\"\r\n                                            role=\"tabpanel\"\r\n                                        >\r\n                                            <b-card-body>\r\n                                                <b-container fluid>\r\n                                                    <b-form-row class=\"my-1\">\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"Наименование операции\"\r\n                                                                label-for=\"payingAgentOperation\"\r\n                                                                description=\"тег 1044\"\r\n                                                            >\r\n                                                                <b-form-input\r\n                                                                    id=\"payingAgentOperation\"\r\n                                                                    type=\"text\"\r\n                                                                    size=\"sm\"\r\n                                                                    v-model=\"model['agent_info.paying_agent.operation']\"\r\n                                                                ></b-form-input>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"Телефон(ы)\"\r\n                                                                label-for=\"payingAgentPhones\"\r\n                                                                description=\"тег 1073\"\r\n                                                            >\r\n                                                                <b-form-textarea\r\n                                                                    id=\"payingAgentPhones\"\r\n                                                                    size=\"sm\"\r\n                                                                    max-rows=\"4\"\r\n                                                                    v-model=\"payingAgentPhones\"\r\n                                                                ></b-form-textarea>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                    </b-form-row>\r\n                                                </b-container>\r\n                                            </b-card-body>\r\n                                        </b-collapse>\r\n                                    </b-card>\r\n\r\n                                    <b-card no-body class=\"mb-1\">\r\n                                        <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                                            <b-button block v-b-toggle.receipt-receive-payments-operator\r\n                                                >Атрибуты оператора по приему платежей</b-button\r\n                                            >\r\n                                        </b-card-header>\r\n                                        <b-collapse\r\n                                            id=\"receipt-receive-payments-operator\"\r\n                                            accordion=\"receipt-agent-supplier-accordion\"\r\n                                            role=\"tabpanel\"\r\n                                        >\r\n                                            <b-card-body>\r\n                                                <b-container fluid>\r\n                                                    <b-form-row class=\"my-1\">\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"Телефон(ы)\"\r\n                                                                label-for=\"receivePaymentsOperatorPhones\"\r\n                                                                description=\"тег 1074\"\r\n                                                            >\r\n                                                                <b-form-textarea\r\n                                                                    id=\"receivePaymentsOperatorPhones\"\r\n                                                                    size=\"sm\"\r\n                                                                    max-rows=\"4\"\r\n                                                                    v-model=\"receivePaymentsOperatorPhones\"\r\n                                                                ></b-form-textarea>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                    </b-form-row>\r\n                                                </b-container>\r\n                                            </b-card-body>\r\n                                        </b-collapse>\r\n                                    </b-card>\r\n\r\n                                    <b-card no-body class=\"mb-1\">\r\n                                        <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                                            <b-button block v-b-toggle.receipt-money-transfer-operator\r\n                                                >Атрибуты оператора перевода</b-button\r\n                                            >\r\n                                        </b-card-header>\r\n                                        <b-collapse\r\n                                            id=\"receipt-money-transfer-operator\"\r\n                                            accordion=\"receipt-agent-supplier-accordion\"\r\n                                            role=\"tabpanel\"\r\n                                        >\r\n                                            <b-card-body>\r\n                                                <b-container fluid>\r\n                                                    <b-form-row class=\"my-1\">\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"Телефон(ы)\"\r\n                                                                label-for=\"moneyTransferOperatorPhones\"\r\n                                                                description=\"тег 1075\"\r\n                                                            >\r\n                                                                <b-form-textarea\r\n                                                                    id=\"moneyTransferOperatorPhones\"\r\n                                                                    size=\"sm\"\r\n                                                                    max-rows=\"4\"\r\n                                                                    v-model=\"moneyTransferOperatorPhones\"\r\n                                                                ></b-form-textarea>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"Наименование\"\r\n                                                                label-for=\"moneyTransferOperatorName\"\r\n                                                                description=\"тег 1026\"\r\n                                                            >\r\n                                                                <b-form-input\r\n                                                                    id=\"moneyTransferOperatorName\"\r\n                                                                    type=\"text\"\r\n                                                                    size=\"sm\"\r\n                                                                    v-model=\"\r\n                                                                        model['agent_info.money_transfer_operator.name']\r\n                                                                    \"\r\n                                                                ></b-form-input>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"Адрес\"\r\n                                                                label-for=\"moneyTransferOperatorAddress\"\r\n                                                                description=\"тег 1005\"\r\n                                                            >\r\n                                                                <b-form-input\r\n                                                                    id=\"moneyTransferOperatorAddress\"\r\n                                                                    type=\"text\"\r\n                                                                    size=\"sm\"\r\n                                                                    v-model=\"\r\n                                                                        model[\r\n                                                                            'agent_info.money_transfer_operator.address'\r\n                                                                        ]\r\n                                                                    \"\r\n                                                                ></b-form-input>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"ИНН\"\r\n                                                                label-for=\"moneyTransferOperatorInn\"\r\n                                                                description=\"тег 1016\"\r\n                                                            >\r\n                                                                <b-form-input\r\n                                                                    id=\"moneyTransferOperatorInn\"\r\n                                                                    type=\"text\"\r\n                                                                    size=\"sm\"\r\n                                                                    pattern=\"\\d{10}|\\d{12}\"\r\n                                                                    maxlength=\"12\"\r\n                                                                    v-model=\"\r\n                                                                        model['agent_info.money_transfer_operator.inn']\r\n                                                                    \"\r\n                                                                ></b-form-input>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                    </b-form-row>\r\n                                                </b-container>\r\n                                            </b-card-body>\r\n                                        </b-collapse>\r\n                                    </b-card>\r\n\r\n                                    <b-card no-body class=\"mb-1\">\r\n                                        <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                                            <b-button block v-b-toggle.receipt-supplier>Атрибуты поставщика</b-button>\r\n                                        </b-card-header>\r\n                                        <b-collapse\r\n                                            id=\"receipt-supplier\"\r\n                                            accordion=\"receipt-agent-supplier-accordion\"\r\n                                            role=\"tabpanel\"\r\n                                        >\r\n                                            <b-card-body>\r\n                                                <b-container fluid>\r\n                                                    <b-form-row class=\"my-1\">\r\n                                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                                            <b-form-group\r\n                                                                label=\"Телефон(ы)\"\r\n                                                                label-for=\"supplierPhones\"\r\n                                                                description=\"тег 1171\"\r\n                                                                class=\"required\"\r\n                                                            >\r\n                                                                <b-form-textarea\r\n                                                                    id=\"supplierPhones\"\r\n                                                                    size=\"sm\"\r\n                                                                    max-rows=\"4\"\r\n                                                                    required\r\n                                                                    v-model=\"supplierPhones\"\r\n                                                                ></b-form-textarea>\r\n                                                            </b-form-group>\r\n                                                        </b-col>\r\n                                                    </b-form-row>\r\n                                                </b-container>\r\n                                            </b-card-body>\r\n                                        </b-collapse>\r\n                                    </b-card>\r\n                                </div>\r\n                            </b-form-group>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-items variant=\"info\">Позиции документа</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-items\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-text> В документе должна быть как минимум одна позиция. </b-card-text>\r\n                            <template v-for=\"(item, id) in receipt.payload.items\">\r\n                                <receipt-item\r\n                                    :key=\"id\"\r\n                                    :item=\"item\"\r\n                                    :disabled=\"receipt.state !== 0\"\r\n                                    @remove=\"removeItem(id)\"\r\n                                ></receipt-item>\r\n                                <hr />\r\n                            </template>\r\n                            <b-container fluid>\r\n                                <b-form-row class=\"my-1\">\r\n                                    <b-col align-self=\"end\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group\r\n                                            label=\"Всего на сумму\"\r\n                                            label-for=\"total\"\r\n                                            description=\"тег 1020\"\r\n                                            class=\"required\"\r\n                                        >\r\n                                            <b-form-input\r\n                                                id=\"total\"\r\n                                                type=\"number\"\r\n                                                min=\"0\"\r\n                                                max=\"42949672.95\"\r\n                                                step=\".01\"\r\n                                                size=\"sm\"\r\n                                                placeholder=\"0\"\r\n                                                required\r\n                                                v-model.number=\"receipt.payload.total\"\r\n                                                :disabled=\"receipt.state !== 0\"\r\n                                            ></b-form-input>\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-sm-3\" align-self=\"end\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-button\r\n                                            class=\"mb-sm-4\"\r\n                                            variant=\"primary\"\r\n                                            size=\"sm\"\r\n                                            @click=\"addItem\"\r\n                                            :disabled=\"receipt.state !== 0\"\r\n                                            >Добавить</b-button\r\n                                        >\r\n                                    </b-col>\r\n                                </b-form-row>\r\n                            </b-container>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-payments variant=\"info\">Данные по оплате</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-payments\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-text> TODO </b-card-text>\r\n                            <b-form-group :disabled=\"receipt.state !== 0\">\r\n                                <b-container fluid>\r\n                                    <b-form-row class=\"my-1\">\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Наличными\"\r\n                                                label-for=\"paymentCash\"\r\n                                                description=\"тег 1031\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"paymentCash\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"0\"\r\n                                                    v-model.number=\"receipt.payload.payments.cash\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Безналичными\"\r\n                                                label-for=\"paymentElectronic\"\r\n                                                description=\"тег 1081\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"paymentElectronic\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"0\"\r\n                                                    v-model.number=\"receipt.payload.payments.electronic\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Предоплатой\"\r\n                                                label-for=\"paymentPrepaid\"\r\n                                                description=\"тег 1215\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"paymentPrepaid\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"0\"\r\n                                                    v-model.number=\"receipt.payload.payments.prepaid\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Постоплатой\"\r\n                                                label-for=\"paymentPostpaid\"\r\n                                                description=\"тег 1216\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"paymentPostpaid\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"0\"\r\n                                                    v-model.number=\"receipt.payload.payments.postpaid\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Встр. предст.\"\r\n                                                label-for=\"paymentOther\"\r\n                                                description=\"тег 1217\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"paymentOther\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    placeholder=\"0\"\r\n                                                    v-model.number=\"receipt.payload.payments.other\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                    </b-form-row>\r\n                                </b-container>\r\n                            </b-form-group>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-vats variant=\"info\">НДС на чек</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-vats\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-text>\r\n                                Необходимо передать либо сумму налога на позицию, либо сумму налога на чек. Если будет\r\n                                переданы и сумма налога на позицию и сумма налога на чек, сервис учтет только сумму\r\n                                налога на чек.\r\n                                <span v-if=\"receipt.payload.vats\"\r\n                                    >В данный момент используются суммы налога на чек. Для возврата к использованию сумм\r\n                                    налога на позицию, очистите все поля в этом разделе.</span\r\n                                >\r\n                                <span v-else\r\n                                    >В данный момент используются суммы налога на позицию. В полях ниже можно увидеть их\r\n                                    расчетные величины.</span\r\n                                >\r\n                            </b-card-text>\r\n                            <b-form-group :disabled=\"receipt.state !== 0\">\r\n                                <b-container fluid>\r\n                                    <b-form-row class=\"my-1\">\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма расчета по чеку без НДС\"\r\n                                                label-for=\"withoutVat\"\r\n                                                description=\"тег 1105\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"withoutVat\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.without_vat\"\r\n                                                    v-model.number=\"vatsWithoutVat\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма расчета по чеку с НДС 0%\"\r\n                                                label-for=\"withVat0\"\r\n                                                description=\"тег 1104\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"withVat0\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.with_vat0\"\r\n                                                    v-model.number=\"vatsWithVat0\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по ставке 5%\"\r\n                                                label-for=\"vat5\"\r\n                                                description=\"тег 1199\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat5\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat5\"\r\n                                                    v-model.number=\"vatsVat5\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по ставке 7%\"\r\n                                                label-for=\"vat7\"\r\n                                                description=\"тег 1199\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat7\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat7\"\r\n                                                    v-model.number=\"vatsVat7\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по ставке 10%\"\r\n                                                label-for=\"vat10\"\r\n                                                description=\"тег 1103\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat10\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat10\"\r\n                                                    v-model.number=\"vatsVat10\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по ставке 20%\"\r\n                                                label-for=\"vat22\"\r\n                                                description=\"тег 1102\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat22\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat22\"\r\n                                                    v-model.number=\"vatsVat22\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по расч. ставке 5/105\"\r\n                                                label-for=\"vat105\"\r\n                                                description=\"тег 1199\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat105\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat105\"\r\n                                                    v-model.number=\"vatsVat105\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по расч. ставке 7/107\"\r\n                                                label-for=\"vat107\"\r\n                                                description=\"тег 1199\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat107\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat107\"\r\n                                                    v-model.number=\"vatsVat107\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по расч. ставке 10/110\"\r\n                                                label-for=\"vat110\"\r\n                                                description=\"тег 1107\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat110\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat110\"\r\n                                                    v-model.number=\"vatsVat110\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Сумма НДС чека по расч. ставке 20/120\"\r\n                                                label-for=\"vat122\"\r\n                                                description=\"тег 1106\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"vat122\"\r\n                                                    type=\"number\"\r\n                                                    min=\"0\"\r\n                                                    max=\"42949672.95\"\r\n                                                    step=\".01\"\r\n                                                    size=\"sm\"\r\n                                                    :placeholder=\"vatsPlaceholder.vat122\"\r\n                                                    v-model.number=\"vatsVat122\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                    </b-form-row>\r\n                                </b-container>\r\n                            </b-form-group>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-misc variant=\"info\">Дополнительные реквизиты</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-misc\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-form-group :disabled=\"receipt.state !== 0\">\r\n                                <b-container fluid>\r\n                                    <b-form-row class=\"my-1\">\r\n                                        <b-col align-self=\"end\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                            <b-form-group\r\n                                                label=\"Доп. реквизит чека\"\r\n                                                label-for=\"additionalCheckProps\"\r\n                                                description=\"тег 1192\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"additionalCheckProps\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    maxlength=\"16\"\r\n                                                    v-model=\"receipt.payload.additional_check_props\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"3\" md=\"5\" sm=\"8\">\r\n                                            <b-form-group\r\n                                                label=\"ФИО кассира\"\r\n                                                label-for=\"cashier\"\r\n                                                description=\"тег 1021\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"cashier\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    maxlength=\"64\"\r\n                                                    v-model=\"receipt.payload.cashier\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"3\" md=\"4\" sm=\"6\">\r\n                                            <b-form-group\r\n                                                label=\"Наим. доп. рекв. пользователя\"\r\n                                                label-for=\"additionalUserPropsName\"\r\n                                                description=\"тег 1085\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"additionalUserPropsName\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    maxlength=\"64\"\r\n                                                    v-model=\"model['additional_user_props.name']\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                        <b-col align-self=\"end\" lg=\"4\" md=\"8\" sm=\"12\">\r\n                                            <b-form-group\r\n                                                label=\"Знач. доп. рекв. пользователя\"\r\n                                                label-for=\"additionalUserPropsValue\"\r\n                                                description=\"тег 1086\"\r\n                                            >\r\n                                                <b-form-input\r\n                                                    id=\"additionalUserPropsValue\"\r\n                                                    type=\"text\"\r\n                                                    size=\"sm\"\r\n                                                    maxlength=\"256\"\r\n                                                    v-model=\"model['additional_user_props.value']\"\r\n                                                ></b-form-input>\r\n                                            </b-form-group>\r\n                                        </b-col>\r\n                                    </b-form-row>\r\n                                </b-container>\r\n                            </b-form-group>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\" v-if=\"receipt.result\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-result variant=\"info\">Результат обработки</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse id=\"receipt-result\" accordion=\"receipt-accordion\" role=\"tabpanel\">\r\n                        <b-card-body>\r\n                            <b-card-sub-title class=\"mb-3\">Информация поставщика</b-card-sub-title>\r\n                            <b-container fluid>\r\n                                <b-form-row>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Дата и время\">\r\n                                            {{ formatTime(receipt.result.timestamp) }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                        <b-form-group description=\"Внутренний идентификатор\">\r\n                                            {{ receipt.result.internal_id }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                </b-form-row>\r\n                            </b-container>\r\n                            <b-card-sub-title class=\"mb-3\" v-if=\"receipt.result.payload\"\r\n                                >Информация ОФД</b-card-sub-title\r\n                            >\r\n                            <b-container fluid v-if=\"receipt.result.payload\">\r\n                                <b-form-row>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Дата и время (тег 1012)\">\r\n                                            {{\r\n                                                formatTime(receipt.result.payload.receipt_datetime, \"DD.MM.YYYY HH:mm\")\r\n                                            }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Номер смены (тег 1038)\">\r\n                                            {{ receipt.result.payload.shift_number }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Номер чека в смене (тег 1042)\">\r\n                                            {{ receipt.result.payload.fiscal_receipt_number }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Сумма расчета (тег 1020)\">\r\n                                            {{ receipt.result.payload.total }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Рег. номер ККТ (тег 1037)\">\r\n                                            {{ receipt.result.payload.ecr_registration_number }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Номер ФН (тег 1041)\">\r\n                                            {{ receipt.result.payload.fn_number }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Фискальный номер документа (тег 1040)\">\r\n                                            {{ receipt.result.payload.fiscal_document_number }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"1\" md=\"2\" sm=\"3\">\r\n                                        <b-form-group description=\"Фискальный признак документа (тег 1077)\">\r\n                                            {{ receipt.result.payload.fiscal_document_attribute }}\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                    <b-col class=\"mb-3\" lg=\"2\" md=\"3\" sm=\"4\">\r\n                                        <b-form-group description=\"Адрес сайта ФНС (тег 1060)\">\r\n                                            <b-link :href=\"resultPayloadFnsSite\" target=\"_blank\">{{\r\n                                                resultPayloadFnsSite\r\n                                            }}</b-link>\r\n                                        </b-form-group>\r\n                                    </b-col>\r\n                                </b-form-row>\r\n                            </b-container>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n\r\n                <b-card no-body class=\"mb-1\" v-if=\"receipt.id\">\r\n                    <b-card-header header-tag=\"header\" class=\"p-1\" role=\"tab\">\r\n                        <b-button block v-b-toggle.receipt-preview variant=\"info\">Просмотр чека</b-button>\r\n                    </b-card-header>\r\n                    <b-collapse\r\n                        id=\"receipt-preview\"\r\n                        @show=\"showPreview = true\"\r\n                        accordion=\"receipt-accordion\"\r\n                        role=\"tabpanel\"\r\n                    >\r\n                        <b-card-body class=\"px-0\">\r\n                            <iframe\r\n                                v-if=\"showPreview\"\r\n                                :src=\"FiscalRegistrar.basePath + '/api/v1/receipts/' + receipt.id + '/preview'\"\r\n                                width=\"100%\"\r\n                                @load=\"fitContent\"\r\n                            ></iframe>\r\n                        </b-card-body>\r\n                    </b-collapse>\r\n                </b-card>\r\n            </div>\r\n            <b-container fluid>\r\n                <b-form-row class=\"my-3\">\r\n                    <b-col sm=\"8\">\r\n                        <b-button v-if=\"receipt.state === 0\" class=\"mb-1\" type=\"submit\" variant=\"primary\" size=\"sm\"\r\n                            >Сохранить</b-button\r\n                        >\r\n                        <b-button\r\n                            v-if=\"receipt.id\"\r\n                            class=\"mb-1\"\r\n                            variant=\"primary\"\r\n                            size=\"sm\"\r\n                            :to=\"{ name: 'new-receipt-from-existing', params: { id: receipt.id } }\"\r\n                            >Дублировать</b-button\r\n                        >\r\n                        <b-button\r\n                            v-if=\"receipt.state === 0\"\r\n                            class=\"mb-1\"\r\n                            variant=\"success\"\r\n                            size=\"sm\"\r\n                            @click=\"registerReceipt\"\r\n                            >Зарегистрировать</b-button\r\n                        >\r\n                        <b-button\r\n                            v-if=\"receipt.state === 1\"\r\n                            class=\"mb-1\"\r\n                            variant=\"warning\"\r\n                            size=\"sm\"\r\n                            @click=\"syncReceipt\"\r\n                            >Синхронизировать</b-button\r\n                        >\r\n                        <b-button v-if=\"receipt.id\" class=\"mb-1\" size=\"sm\" @click=\"printReceipt\">Распечатать</b-button>\r\n                        <b-button\r\n                            v-if=\"receipt.result\"\r\n                            class=\"mb-1\"\r\n                            size=\"sm\"\r\n                            :href=\"receipt.result.payload.ofd_receipt_url\"\r\n                            target=\"_blank\"\r\n                            >Просмотреть в ОФД</b-button\r\n                        >\r\n                        <b-button\r\n                            v-if=\"receipt.id && receipt.state === 0\"\r\n                            class=\"mb-1\"\r\n                            variant=\"danger\"\r\n                            size=\"sm\"\r\n                            @click=\"deleteReceipt\"\r\n                            >Удалить</b-button\r\n                        >\r\n                    </b-col>\r\n                    <b-col class=\"text-right\" sm=\"4\">\r\n                        <b-button class=\"mb-1\" size=\"sm\" :to=\"{ name: 'receipts' }\">К списку</b-button>\r\n                    </b-col>\r\n                </b-form-row>\r\n            </b-container>\r\n        </b-form>\r\n    </div>\r\n</template>\r\n"],"names":["_sfc_main","val","phones","phone","price","quantity","sum","vatType","agent_info","supplier_info","ReceiptItem","Receipt","to","from","receipt","id","asTemplate","isNew","error","msgBag","msg","calc","vats","item","event","printWindow","name","data","key","items","total","vat"],"mappings":"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"}